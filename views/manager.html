

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.82.0">
    <title>Checkout example · Bootstrap v5.0</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/checkout/">



    

    <!-- Bootstrap core CSS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script>
    <meta name="google-signin-client_id" content="879641029617-bfq2kjb5n7a2g87u4molj1gq0ph2g7s5.apps.googleusercontent.com">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>


<meta name="theme-color" content="#7952b3">


    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <!-- <link href="form-validation.css" rel="stylesheet"> -->
  </head>
  <body class="bg-light">
    
<div class="container">
  <main>
   
    <div class="py-5 text-center">

      <div class="container " id = "">
        <div class="row clearfix">
        <div class="col-md-12 column">
          <table class="table table-bordered table-hover" id="tab_logic">
            <thead>
              <tr >
                <th class="text-center">
                  #
                </th>
                <th class="text-center">
                  Email
                </th>
                <th class="text-center">
                  Authentication
                </th>
                <th class="text-center">
                  Admin
                </th>
                <th class = "text-center"> 
                   Approve
                </th>
                <th class = "text-center"> 
                  Decline
               </th>
                <th class = "text-center"> 
                  Delete
               </th>
              </tr>
            </thead>
            <tbody>
          <!-- <tr id='addr0'></tr> 
        -->
            </tbody>
          </table>
        </div>
      </div>
    </div>
   
    </div>
    <div class="container">
            
    </div>
  </main>
</div>
<hr></hr>
  <div class="mx-auto" style="width: 300px;">


        <div class="row g-3 align-items-center">
          <div class="col-auto">
            <label for="text" class="col-form-label">Username</label>
          </div>
          <div class="col-auto">
            <input type="text" id="username" class="form-control" aria-describedby="passwordHelpInline">
          </div>
          <div class="col-auto">
            <span id="passwordHelpInline" class="form-text">
              Must be valid email. Eg: hieudeptrai@gmail.com
            </span>
          </div>
          <div class="col-auto">
            <label for="inputPassword6" class="col-form-label">Password</label>
          </div>
          <div class="col-auto">
            <input type="password" id="password" class="form-control" aria-describedby="passwordHelpInline">
          </div>
          <div class="col-auto">
            <span id="passwordHelpInline" class="form-text">
              Must be 8-20 characters long.
            </span>
          </div>
          <div class="col-auto">
            <button id="addUser" class="btn btn-success" type="submit">Add</button>
          </div>

          <div class="col-auto" id="validemailpassword" type="hidden"	>
            <span  class="form-text">
              <div class="alert alert-danger" role="alert">
                Maybe your email or password is empty or invalid !!
              </div>
            </span>
          </div>
    
        </div>

      </div>


  <footer class="my-5 pt-5 text-muted text-center text-small">
    <p class="mb-1">&copy; 2017–2021 Company Name</p>
    <ul class="list-inline">
      <li class="list-inline-item"><a href="#">Privacy</a></li>
      <li class="list-inline-item"><a href="#">Terms</a></li>
      <li class="list-inline-item"><a href="#">Support</a></li>
    </ul>
  </footer>
</div>
<script>
  $(document).ready( async function(){
    $("#validemailpassword").hide();

    const users = await axios.get('/user');
    let i=0;
    users["data"].forEach(username => {
       $('#tab_logic').append('<tr id="addr'+i+'"></tr>');

       $('#addr'+i).html("<td>" + (i+1) + "</td><td><label for='email' id='email' class='sr-only'>" + username.email  + "</label></td> <td><label for='status' class='sr-only'>"+ username.isAuth + "</label></td><td><label for='status' class='sr-only'> " + username.isAdmin + "</label></td><td><button type='button' id = 'approve' class='btn btn-primary'>Approve</button></td><td><button type='button' id = 'decline' class='btn btn-warning'>Decline</button></td><td><button type='button' id = 'delete' class='btn btn-danger'>Delete</button></td>")
        i++; 
            
    });
 

    $(".btn-danger").click( async function(){
      let email = "" ;
      
      $(this).parent().siblings().each(function() {
                if (this.cellIndex == 1) 
                  email =  $(this).text();

              });
      await axios.delete('/user',{data: {email: email}});

      location.reload();

    })
     
    $(".btn-warning").click(async function(){
          
          $(this).parent().siblings().each(async function() {
                    if (this.cellIndex == 1) {
                      const email =  $(this).text();

                      await axios.put('/user',{email: email,isAuth: false});
                       location.reload();
                    }

                  });
    



		 })
     
    $(".btn-primary").click(async function(){
             let email = "";
              $(this).parent().siblings().each( async function() {

                        if (this.cellIndex == 1) 
                          {
                                 email =  $(this).text();
                                

                          }

              });
              console.log(email)
              await axios.put('/user',{email: email,isAuth: true});
               location.reload();
        

        })
      function isEmail(email) {
            var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
            return regex.test(email);
      }
      function isPassword(password){
          var pattern = /^[a-zA-Z0-9_-]{5,15}$/;
          if(pattern.test(password)){
              return true;
          }else{
              return false;
          }
      }
      
      $(".btn-success").click(async function(){
          
          const email = $("#username").val();
          const password = $("#password").val();
          if (!isEmail(email) || !isPassword(password)){
              $("#validemailpassword").show();
              return;
          } else {

            await axios.post('/user',{email: email,password: password});
            location.reload();
          }

        
        
      })
	 });
   

    
    

// });

</script>



  </body>


</html>
